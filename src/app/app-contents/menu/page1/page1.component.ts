import { Component, OnInit } from "@angular/core";
import { Validators } from "@angular/forms";
import { FieldConfig } from "../../dynamic-form/fields-interface";
import { RestResults, PageResults } from "../../models_interfaces";
import { PageEvent } from "@angular/material/paginator";
import { RegexValidator } from "../../pipes-validators/common-validators.directive";

/*-------------------------- Column Ids and Column Configurations ---------------------------------- */

const columnIds = [
  "index",
  "field1",
  "field2",
  "field3",
  "field4",
  "field5",
  "field6",
  "field7",
  "field8",
  "field9",
  "field10",
  "field11",
  "field12",
  "field13",
  "field14",
  "field15",
  "field16",
  "field17",
  "field18",
  "field19",
  "field20",
];

const columnConfigs = {
  index: {
    name: "Index",
    sortEn: false,
    sticky: true,
    pipe: "",
    columnStyle: { "text-align": "left", left: "0px" },
  }, //'left' sets position of element so that is can 'stick' in  place
  field1: {
    name: "Field No1",
    sortEn: false,
    sticky: true,
    pipe: "",
    columnStyle: { "text-align": "left", left: "90px" },
  },
  field2: {
    name: "Field No2",
    sortEn: false,
    sticky: true,
    pipe: "",
    columnStyle: { "text-align": "left", left: "200px" },
  },
  field3: {
    name: "Field No3",
    sortEn: false,
    sticky: true,
    pipe: "",
    columnStyle: { "text-align": "left", left: "300px" },
  },
  field4: {
    name: "Field No4",
    sortEn: false,
    sticky: false,
    pipe: "lowerCase",
    columnStyle: { "text-align": "left" },
  },
  field5: {
    name: "Field No5",
    sortEn: false,
    sticky: false,
    pipe: "upperCase",
    columnStyle: { "text-align": "left" },
  },
  field6: {
    name: "Field No6",
    sortEn: false,
    sticky: false,
    pipe: "lowerCase",
    columnStyle: { "text-align": "left" },
  },
  field7: {
    name: "Field No7",
    sortEn: false,
    sticky: false,
    pipe: "decimal//1.0-0//el",
    columnStyle: { "text-align": "right" },
  },
  field8: {
    name: "Field No8",
    sortEn: false,
    sticky: false,
    pipe: "decimal//1.0-2//el",
    columnStyle: { "text-align": "right" },
  },
  field9: {
    name: "Field No9",
    sortEn: false,
    sticky: false,
    pipe: "decimal//1.3-5//el",
    columnStyle: { "text-align": "right" },
  },
  field10: {
    name: "Field No10",
    sortEn: false,
    sticky: false,
    pipe: "date//short",
    columnStyle: { "text-align": "left" },
  },
  field11: {
    name: "Field No11",
    sortEn: false,
    sticky: false,
    pipe: "date//fullDate",
    columnStyle: { "text-align": "left" },
  },
  field12: {
    name: "Field No12",
    sortEn: false,
    sticky: false,
    pipe: "date//dd/MM/yyyy",
    columnStyle: { "text-align": "left" },
  },
  field13: {
    name: "Field No13",
    sortEn: false,
    sticky: false,
    pipe: "toDate//yyyyMMdd//long",
    columnStyle: { "text-align": "right" },
  },
  field14: {
    name: "Field No14",
    sortEn: false,
    sticky: false,
    pipe: "currency//CAD//code",
    columnStyle: { "text-align": "right" },
  },
  field15: {
    name: "Field No15",
    sortEn: false,
    sticky: false,
    pipe: "currency//EUR//symbol//1.2-2",
    columnStyle: { "text-align": "right" },
  },
  field16: {
    name: "Field No16",
    sortEn: false,
    sticky: false,
    pipe: "currency//CLP1//symbol-narrow//1.0-2",
    columnStyle: { "text-align": "right" },
  },
  field17: {
    name: "Field No17",
    sortEn: false,
    sticky: false,
    pipe: "percent",
    columnStyle: { "text-align": "right" },
  },
  field18: {
    name: "Field No18",
    sortEn: false,
    sticky: false,
    pipe: "percent//1.0-2",
    columnStyle: { "text-align": "right" },
  },
  field19: {
    name: "Field No19",
    sortEn: false,
    sticky: false,
    pipe: "percent//1.2-2",
    columnStyle: { "text-align": "right" },
  },
  field20: {
    name: "Field No20",
    sortEn: false,
    sticky: false,
    pipe: "",
    columnStyle: { "text-align": "right" },
  },
};

/*-------------------------------------------------------------------------------------------------------------------------------- */

@Component({
  selector: "app-page1",
  templateUrl: "./page1.component.html",
})
export class Page1Component implements OnInit {
  columnIds = [];
  columnValues = {};
  dataSource = [];
  dataSourceV2 = [];

  searchData: RestResults[];
  searchPageInfo: PageResults;
  searchPageInfo2: PageResults;
  searchPageInfo3: PageResults;

  regConfig: FieldConfig[];

  setRegConfig() {
    this.regConfig = [
      {
        type: "autocomplete",
        label: "Autocomplete",
        name: "field1",
        value: "",
        options: [],
        url: "rest/some/valid/endpoint/for/server/http/request",
        validations: [
          {
            name: "required",
            validator: Validators.required,
            message: "Field is required",
          },
        ],
      },
      {
        type: "select",
        label: "Select",
        name: "field2",
        value: null,
        options: [
          { id: "id1", code: "code1" },
          { id: "id2", code: "code2" },
          { id: "id3", code: "code3" },
        ],
        validations: [
          {
            name: "required",
            validator: Validators.required,
            message: "Field is required",
          },
        ],
      },
      {
        type: "input",
        label: "Input",
        name: "field3",
        inputType: "text",
        validations: [
          {
            name: "required",
            validator: Validators.required,
            message: "Field is required",
          },
          {
            name: "invalidRegEx",
            validator: RegexValidator(
              /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$&@_*\.\^!]).{10,}$/
            ),
            message: "password.pattern",
          },
        ],
      },
      {
        type: "autocomplete",
        label: "Autocomplete",
        name: "field4",
        value: "",
        options: [
          { id: "id1", code: "code1" },
          { id: "id2", code: "code2" },
          { id: "id3", code: "code3" },
          { id: "id4", code: "code4" },
        ],
        validations: [
          {
            name: "required",
            validator: Validators.required,
            message: "Field is required",
          },
        ],
      },
      {
        type: "input",
        label: "Input",
        inputType: "text",
        name: "field5",
        validations: [],
      },
      {
        type: "input",
        label: "Input",
        inputType: "text",
        name: "field6",
        validations: [],
      },
      {
        type: "input",
        label: "Input",
        inputType: "text",
        name: "field7",
        validations: [],
      },
      {
        type: "radiobutton",
        label: "Radiobutton",
        name: "field8",
        options: ["Option1", "Option2"],
        value: null,
      },
      {
        type: "date",
        label: "Date",
        name: "field9",
        validations: [
          {
            name: "required",
            validator: Validators.required,
            message: "Field is required",
          },
        ],
      },
      {
        type: "checkbox",
        label: "Checkbox",
        name: "field10",
        value: true,
      },
      {
        type: "button",
        name: "button1",
        label: "Button No1",
      },
      {
        type: "button",
        name: "button2",
        label: "Button No2",
      },
      {
        type: "button",
        name: "button3",
        label: "Button No3",
      },
    ];
  }

  constructor() {
    this.columnIds = columnIds;
    this.columnValues = columnConfigs;
    this.dataSource = denseTable;
    this.dataSourceV2 = sparseTable;
    this.searchPageInfo = {
      number: 0,
      size: 25,
      totalElements: 2000,
      totalPages: 80,
      sort: "",
      ascending: true,
    };

    this.searchPageInfo2 = {
      number: 0,
      size: 50,
      totalElements: 6000,
      totalPages: 120,
      sort: "",
      ascending: true,
    };
  }

  ngOnInit() {
    this.setRegConfig();
  }

  onSorting() {}

  paginationUpdate(event: PageEvent) {
    console.log("Pagination event: ", event);
    //this.searchPageInfo3 = this.searchPageInfo;
    //this.searchPageInfo = this.searchPageInfo2;
    //this.searchPageInfo2 = this.searchPageInfo3;
  }

  checkEvent(eventArr) {
    let event = eventArr[0];
    let eventType = eventArr[1];
    console.log("event: ", event), console.log(eventArr[1]);
  }
}

/*------------------------DUMMY DATA FOR EXAMPLE----------------------------------------------------------------- */

const denseTable = [
  {
    field1: "field name 1",
    field2: "field name 2",
    field3: "field name 3-1",
    field4: "description 1-1",
    field5: "DESCritpion 2",
    field6: "DesCRIPTION 3-1",
    field7: 23.454326326,
    field8: 13234.4325432545342,
    field9: 55.433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.32323,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-2",
    field2: "field name 2-1",
    field3: "field name 3-2",
    field4: "description 1-2",
    field5: "DESCritpion 2-2",
    field6: "DesCRIPTION 3-2",
    field7: 214.326326,
    field8: 425.432545342,
    field9: 4355.433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 12.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-3",
    field2: "field name 2-2",
    field3: "field name 3-3",
    field4: "description 1-3",
    field5: "DESCritpion 2-3",
    field6: "DesCRIPTION 3-3",
    field7: 786578.26326,
    field8: 234.325432545342,
    field9: 3.55433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 323.4423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-4",
    field2: "field name 2-3",
    field3: "field name 3-4",
    field4: "description 1-4",
    field5: "DESCritpion 2-4",
    field6: "DesCRIPTION 3-4",
    field7: 234.4326326,
    field8: 5.5432545342,
    field9: 433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.06543079,
    field16: 2.43345,
    field17: 324.3,
    field18: 344.23,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-5",
    field2: "field name 2-4",
    field3: "field name 3-5",
    field4: "description 1-5",
    field5: "DESCritpion 2-5",
    field6: "DesCRIPTION 3-5",
    field7: 326326,
    field8: 13235.45342,
    field9: 43.3445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 155.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 1.4423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-6",
    field2: "field name 2-5",
    field3: "field name 3-6",
    field4: "description 1-6",
    field5: "descritpion 2-6",
    field6: "DesCRIPTION 3-6",
    field7: 326326,
    field8: 1.3325432545342,
    field9: 55.433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1125.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.33,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-7",
    field2: "field name 2-6",
    field3: "field name 3-7",
    field4: "description 1-7",
    field5: "DESCritpion 2-7",
    field6: "DesCRIPTION 3-7",
    field7: 1.326,
    field8: 7.325432545342,
    field9: 4.33445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 251.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.36,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-8",
    field2: "field name 2-7",
    field3: "field name 3-8",
    field4: "description 1-8",
    field5: "DESCritpion 2-8",
    field6: "DesCRIPTION 3-8",
    field7: 326,
    field8: 13.325432545342,
    field9: 0.355433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.05456079,
    field16: 2.43345,
    field17: 324.3,
    field18: 6.423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-9",
    field2: "field name 2-8",
    field3: "field name 3-9",
    field4: "description 1-9",
    field5: "DESCritpion 2-9",
    field6: "DesCRIPTION 3-9",
    field7: 26,
    field8: 322.25432545342,
    field9: 0.3445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0054579,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.34423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-10",
    field2: "field name 2-9",
    field3: "field name 3-10",
    field4: "description 1-10",
    field5: "DESCritpion 2-10",
    field6: "DesCRIPTION 3-10",
    field7: 2,
    field8: 5.25432545342,
    field9: 654.433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.055079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-11",
    field2: "field name 2-10",
    field3: "field name 3-11",
    field4: "description 1-11",
    field5: "DESCritpion 2-11",
    field6: "DesCRIPTION 3-11",
    field7: 231423.54326326,
    field8: 45.434345342,
    field9: 0.4355433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 3521.343,
    field15: 1.50079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-12",
    field2: "field name 2-11",
    field3: "field name 3-12",
    field4: "description 1-12",
    field5: "DESCritpion 2-12",
    field6: "DesCRIPTION 3-12",
    field7: 23.6326,
    field8: 78.785342,
    field9: 12.433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-13",
    field2: "field name 2-12",
    field3: "field name 3-13",
    field4: "description 1-13",
    field5: "DESCritpion 2-13",
    field6: "DesCRIPTION 3-13",
    field7: 234224.43,
    field8: 13234.4325432545342,
    field9: 123.3445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 15435.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-14",
    field2: "field name 2-13",
    field3: "field name 3-14",
    field4: "description 1-14",
    field5: "DESCritpion 2-14",
    field6: "DesCRIPTION 3-14",
    field7: 22343.1,
    field8: 13234.4325432545342,
    field9: 0.4355433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 551.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-15",
    field2: "field name 2-14",
    field3: "field name 3-15",
    field4: "description 1-15",
    field5: "DESCritpion 2-15",
    field6: "DesCRIPTION 3-15",
    field7: 324.3216326,
    field8: 13234.4325432545342,
    field9: 0.4355433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 561.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
  {
    field1: "field name 1-16",
    field2: "field name 2-15",
    field3: "field name 3-16",
    field4: "description 1-16",
    field5: "DESCritpion 2-16",
    field6: "DesCRIPTION 3-16",
    field7: 12.26326,
    field8: 13234.4325432545342,
    field9: 0.4355433445,
    field10: new Date(),
    field11: new Date(),
    field12: new Date(),
    field13: "20221222",
    field14: 321.343,
    field15: 1.0079,
    field16: 2.43345,
    field17: 324.3,
    field18: 0.3234423,
    field19: 2122.112,
    field20: 12.0,
  },
];

const sparseTable = [
  {
    col1: "Column 1 - Row 1",
    col2: "Column 2 - Row 1",
    col3: new Date(),
    col4: 21.4334243,
  },
  {
    col1: "Column 1 - Row 2",
    col2: "Column 2 - Row 2",
    col3: new Date(),
    col4: 0.34243,
  },
  {
    col1: "Column 1 - Row 3",
    col2: "Column 2 - Row 3",
    col3: new Date(),
    col4: 23,
  },
  {
    col1: "Column 1 - Row 4",
    col2: "Column 2 - Row 4",
    col3: new Date(),
    col4: 221.323,
  },
  {
    col1: "Column 1 - Row 5",
    col2: "Column 2 - Row 5",
    col3: new Date(),
    col4: 24.243,
  },
  {
    col1: "Column 1 - Row 6",
    col2: "Column 2 - Row 6",
    col3: new Date(),
    col4: 21.43,
  },
];
